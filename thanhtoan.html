<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh To√°n ƒê∆°n H√†ng</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

    <style>
        body {
            background: #f5f7fa;
        }
        .checkout-box {
            background: #fff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }
    </style>
</head>
<body>

<div class="container my-5">
    <h2 class="text-center mb-4 text-primary">
        <i class="bi bi-credit-card-fill me-2"></i> Thanh To√°n ƒê∆°n H√†ng
    </h2>

    <div class="row g-4">

        <!-- TH√îNG TIN KH√ÅCH H√ÄNG -->
        <div class="col-lg-7">
            <div class="checkout-box">
                <h5 class="mb-3"><i class="bi bi-person-fill me-2"></i> Th√¥ng tin kh√°ch h√†ng</h5>

                <form id="checkoutForm">
                    <div class="mb-3">
                        <label class="form-label">H·ªç v√† t√™n</label>
                        <input type="text" class="form-control" id="fullname" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="tel" class="form-control" id="phone" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="email">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ƒê·ªãa ch·ªâ giao h√†ng</label>
                        <textarea class="form-control" rows="3" id="address" required></textarea>
                    </div>

                    <h5 class="mt-4 mb-3">
                        <i class="bi bi-wallet-fill me-2"></i> Ph∆∞∆°ng th·ª©c thanh to√°n
                    </h5>

                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="payment" checked>
                        <label class="form-check-label">
                            Thanh to√°n khi nh·∫≠n h√†ng (COD)
                        </label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="payment">
                        <label class="form-check-label">
                            Chuy·ªÉn kho·∫£n ng√¢n h√†ng
                        </label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="payment">
                        <label class="form-check-label">
                            V√≠ ƒëi·ªán t·ª≠ (Momo / ZaloPay)
                        </label>
                    </div>
                </form>
            </div>
        </div>

        <!-- T√ìM T·∫ÆT ƒê∆†N H√ÄNG -->
        <div class="col-lg-5">
            <div class="checkout-box">
                <h5 class="mb-3">
                    <i class="bi bi-receipt-cutoff me-2"></i> ƒê∆°n h√†ng c·ªßa b·∫°n
                </h5>

                <ul class="list-group mb-3" id="orderList"></ul>

                <div class="d-flex justify-content-between fw-bold fs-5">
                    <span>T·ªïng c·ªông:</span>
                    <span class="text-danger" id="totalPrice">0‚Ç´</span>
                </div>

                <button class="btn btn-danger btn-lg w-100 mt-4" onclick="placeOrder()">
                    <i class="bi bi-check-circle-fill me-2"></i> X√°c nh·∫≠n ƒë·∫∑t h√†ng
                </button>

                <a href="giohang.html" class="btn btn-outline-secondary w-100 mt-2">
                    <i class="bi bi-arrow-left"></i> Quay l·∫°i gi·ªè h√†ng
                </a>
            </div>
        </div>

    </div>
</div>

<script>
    function getCart() {
        return JSON.parse(localStorage.getItem('shoppingCart')) || [];
    }

    function formatCurrency(number) {
        return new Intl.NumberFormat('vi-VN', {
            style: 'currency',
            currency: 'VND'
        }).format(number);
    }

    function renderOrder() {
        const cart = getCart();
        const orderList = document.getElementById('orderList');
        const totalPrice = document.getElementById('totalPrice');

        let total = 0;
        orderList.innerHTML = '';

        if (cart.length === 0) {
            alert("Gi·ªè h√†ng tr·ªëng!");
            window.location.href = "giohang.html";
            return;
        }

        cart.forEach(item => {
            const subtotal = item.price * item.quantity;
            total += subtotal;

            orderList.innerHTML += `
                <li class="list-group-item d-flex justify-content-between">
                    <span>${item.name} x${item.quantity}</span>
                    <strong>${formatCurrency(subtotal)}</strong>
                </li>
            `;
        });

        totalPrice.textContent = formatCurrency(total);
    }

    function placeOrder() {
        const fullname = document.getElementById('fullname').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const address = document.getElementById('address').value.trim();

        if (!fullname || !phone || !address) {
            alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!");
            return;
        }

        alert(
            "üéâ ƒê·∫∑t h√†ng th√†nh c√¥ng!\n\n" +
            "C·∫£m ∆°n b·∫°n ƒë√£ mua h√†ng t·∫°i TD_Badminton."
        );

        localStorage.removeItem('shoppingCart');
        window.location.href = "Trang_chu.html";
    }

    document.addEventListener('DOMContentLoaded', renderOrder);
</script>

</body>
</html>
